<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
<title>9.15. Le sélecteur de police</title>
<link rel="stylesheet" href="pygtktutfr.css">
<meta name="keywords" content="python,pygtk,tutoriel,traduction,fonte,police">
<link rel="start" href="index.html" title="Tutoriel PyGTK 2.0">
<link rel="home" href="index.html" title="Table des matières">
<link rel="up" href="ch-MiscellaneousWidgets.html" title="Chapitre 9. Widgets divers">
<link rel="previous" href="sec-FileSelections.html" title="9.14. Le sélecteur de fichier">
<link rel="next" href="ch-ContainerWidgets.html" title="Chapitre 10. Les widgets conteneurs">
</head>

<body>
<div class="navheader">
<table width="100%" summary="En-tête de navigation">
<tr>
<th colspan="3" align="center">9.15. Le sélecteur de police</th>
</tr><tr>
<td width="20%" align="left"><a accesskey="p" href="sec-FileSelections.html">Préc.</a></td>
<th width="60%" align="center">Chapitre 9. Widgets divers</th>
<td width="20%" align="right"><a accesskey="n" href="ch-ContainerWidgets.html">Suiv.</a></td>
</tr></table>

<hr>
</div>

<div class="sect1"><div class="titlepage">
<div><h2 class="title" style="clear: both"><a name="SelecteurPolice"></a>9.15. Le sélecteur de police</h2></div></div>

<p>Le <tt>gtk.FontSelectionDialog</tt> permet à l'utilisateur de sélectionner interactivement une police pour le programme. Il s'agit d'une boite de dialogue contenant un widget <tt>gtk.FontSelection</tt> et des boutons "Valider" et "Annuler". Un bouton "Appliquer" est également disponible mais il est caché par défaut. Le sélecteur de fichier permet de choisir parmi les polices système disponibles (les mêmes que celles qu'on obtient avec <b>xlsfonts</b>).</p>
<p>La <a href="sec-FontSelectionDialog.html#FigSelectionPolice" title="Figure 9.15. Boite de dialogue du sélecteur de police">Figure 9.15</a> montre la boite de dialogue du sélecteur de police&nbsp;:</p>

<div class="figure"><a name="FigSelectionPolice"></a>
<p class="title"><b>Figure 9.15. Boite de dialogue du sélecteur de police</b></p>
<div class="mediaobject" align="center">
<img src="figures/selectpolice.png" align="middle" alt="exemple sélecteur de police">
</div></div>

<p>La boite de dialogue contient un ensemble de trois onglets qui proposent&nbsp;:</p>

<div class="itemizedlist"><ul type="disc">
<li><p>une interface de sélection de la police, de son style et de sa taille</p></li>
<li><p>des informations détaillées sur la police sélectionnée</p></li>
<li><p>une interface pour le mécanisme de filtrage des polices, qui décide des polices pouvant être sélectionnées</p></li>
</ul></div>

<p>La fonction de création de cette boite de dialogue est la suivante&nbsp;:</p>

<pre class="programlisting">
  dialselectpolice = gtk.FontSelectionDialog(<b><tt>title</tt></b>)
</pre>

<p>Le titre (<i><tt>title</tt></i>) est une chaine de caractères qui sera utilisée comme texte pour la barre de titre.</p>
<p>Une instance de <tt>gtk.FontSelectionDialog</tt> possède plusieurs attributs&nbsp;:</p>

<pre class="programlisting">
  fontsel
  main_vbox
  action_area
  ok_button
  apply_button
  cancel_button
</pre>

<p>L'attribut <i><tt>fontsel</tt></i> fait référence au widget de sélection de police, et <i><tt> main_vbox</tt></i> à la boite verticale contenant ce dernier ainsi que l'"action_area". <i><tt>action_area</tt></i> se réfère à la <tt>gtk.HButtonBox</tt> qui contient les boutons 'Valider', 'Appliquer' et 'Annuler'. Les attributs <i><tt>ok_button</tt></i>, <i><tt>cancel_button</tt></i> et <i><tt>apply_button</tt></i> se rapportent aux boutons 'Valider', 'Appliquer' et 'Annuler' et peuvent servir à établir des connexions aux signaux de ces derniers. <i><tt>apply_button</tt></i> peut servir à afficher le bouton 'Appliquer'.</p>

<p>Avec la méthode qui suit, on peut définir la police qui doit être initialement affichée dans le sélecteur de police&nbsp;:</p>

<pre class="programlisting">
  dialselectpolice.set_font_name(<b><tt>fontname</tt></b>)
</pre>

<p>L'argument <i><tt>fontname</tt></i> (nom de police) attend le nom d'une police système intégralement ou partiellement spécifiée. Par exemple&nbsp;:</p>

<pre class="programlisting">
  dialselectpolice.set_font_name('-adobe-courier-bold-*-*-*-*-120-*-*-*-*-*-*')
</pre>

<p>... spécifie partiellement la police initiale.</p>
<p>Le nom de la police sélectionnée peut être récupéré avec cette méthode&nbsp;:</p>

<pre class="programlisting">
  nom_police = dialselectpolice.get_font_name()
</pre>

<p>La boite de dialogue du sélecteur de police dispose d'une zone d'aperçu qui affiche du texte dans la police sélectionnée. Le texte utilisé dans cette zone d'aperçu peut être défini avec la méthode&nbsp;:</p>

<pre class="programlisting">
  dialselectpolice.set_preview_text(<b><tt>text</tt></b>)
</pre>

<p>Le texte de l'aperçu peut être récupéré à l'aide de la méthode suivante&nbsp;:</p>

<pre class="programlisting">
  texte = dialselectpolice.get_preview_text()
</pre>

<p>Le programme exemple <a href="exemples/calendrier.py" target="_top"><b>calendrier.py</b></a> utilise un <tt>gtk.FontSelectionDialog</tt> pour la sélection de la police du calendrier. Les lignes 106 à 111 définissent une fonction de rappel qui récupère le nom de la police à partir du sélecteur de police et l'utilise pour définir la police du calendrier. Les lignes 113-132 définissent la méthode qui crée le sélecteur de police, connecte les boutons 'Valider' et 'Annuler' à leur fonction de rappel, et affiche la boite de dialogue.</p></div>

<div class="navfooter">
<hr>

<table width="100%" summary="Bas de page de navigation">
<tr>
<td width="40%" align="left"><a accesskey="p" href="sec-FileSelections.html">Préc.</a></td>
<td width="20%" align="center"><a accesskey="u" href="ch-MiscellaneousWidgets.html">Chapitre parent</a></td>
<td width="40%" align="right"><a accesskey="n" href="ch-ContainerWidgets.html">Suiv.</a></td>
</tr><tr>
<td width="40%" align="left" valign="top">9.14. Le sélecteur de fichier</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Table des matières</a></td>
<td width="40%" align="right" valign="top">Chapitre 10. Les widgets conteneurs</td>
</tr></table>
</div>

</body>

</html>
