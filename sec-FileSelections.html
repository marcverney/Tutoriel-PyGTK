<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
<title>9.14. Le sélecteur de fichier</title>
<link rel="stylesheet" href="pygtktutfr.css">
<meta name="keywords" content="python,pygtk,tutoriel,traduction,selection de fichier">
<link rel="start" href="index.html" title="Tutoriel PyGTK 2.0">
<link rel="home" href="index.html" title="Table des matières">
<link rel="up" href="ch-MiscellaneousWidgets.html" title="Chapitre 9. Widgets divers">
<link rel="previous" href="sec-ColorSelection.html" title="9.13. Le sélecteur de couleur">
<link rel="next" href="sec-FontSelectionDialog.html" title="9.15. Le sélecteur de police">
</head>

<body>
<div class="navheader">
<table width="100%" summary="En-tête de navigation">
<tr>
<th colspan="3" align="center">9.14. Le sélecteur de fichier</th>
</tr><tr>
<td width="20%" align="left"><a accesskey="p" href="sec-ColorSelection.html">Préc.</a></td>
<th width="60%" align="center">Chapitre 9. Widgets divers</th>
<td width="20%" align="right"><a accesskey="n" href="sec-FontSelectionDialog.html">Suiv.</a></td>
</tr></table>

<hr>
</div>

<div class="sect1"><div class="titlepage">
<div><h2 class="title" style="clear: both"><a name="SelecteurFichier"></a>9.14. Le sélecteur de fichier</h2></div></div>

<p>Le sélecteur de fichier est un moyen simple et rapide d'afficher une boite de dialogue de fichier déjà équipée des boutons Valider, Annuler, et Aide. Une bonne économie en temps de programmation !</p>
<p>Pour créer une nouvelle boite de sélection de fichier, on utilise&nbsp;:</p>

<pre class="programlisting">
  selectfichier = gtk.FileSelection(<b><tt>title</tt></b>=None)
</pre>

<p>Pour définir le nom du fichier, par exemple pour joindre directement un dossier spécifique ou donner un nom de fichier par défaut, on utilise la méthode&nbsp;:</p>

<pre class="programlisting">
  selectfichier.set_filename(<b><tt>filename</tt></b>)
</pre>

<p>... où <i><tt>filename</tt></i> est le nom du fichier. Pour récupérer, sous forme de texte, le nom du fichier que l'utilisateur a saisi ou cliqué, on fait appel à la méthode suivante&nbsp;:</p>

<pre class="programlisting">
  nomfichier = selectfichier.get_filename()
</pre>

<p>Il existe aussi des références aux widgets contenus dans le sélecteur de fichier. Ce sont tous des attributs de <i>selectfichier</i>&nbsp;:</p>

<pre class="programlisting">
  selectfichier.dir_list                 # (liste des dossiers)
  selectfichier.file_list                # (liste des fichiers)
  selectfichier.selection_entry          # (champ de saisie "Sélection")
  selectfichier.selection_text           # (texte "Sélection")
  selectfichier.main_vbox                # (boite verticale principale)
  selectfichier.ok_button                # (bouton Valider)
  selectfichier.cancel_button            # (bouton Annuler)
  selectfichier.help_button              # (bouton Aide)
  selectfichier.history_pulldown         # (menu historique déroulant)
  selectfichier.history_menu	         #
  selectfichier.fileop_dialog            # (boutons d'opération sur fichier&nbsp;: boite de dialogue)
  selectfichier.fileop_entry             # (boutons d'opération sur fichier&nbsp;: champ de saisie)
  selectfichier.fileop_file              # (boutons d'opération sur fichier&nbsp;: fichier)
  selectfichier.fileop_c_dir             # (boutons d'opération sur fichier&nbsp;: bouton "Créer un dossier")
  selectfichier.fileop_del_file          # (boutons d'opération sur fichier&nbsp;: bouton "Supprimer le fichier")
  selectfichier.fileop_ren_file          # (boutons d'opération sur fichier&nbsp;: bouton "Renommer le fichier")
  selectfichier.button_area              # (zone des boutons d'opération sur fichier)
  selectfichier.action_area              #
</pre>

<p>On utilisera le plus souvent les attributs <i><tt>ok_button</tt></i>, <i><tt>cancel_button</tt></i>, et <i><tt>help_button</tt></i> afin de connecter les signaux de leur widget à des fonctions de rappel.</p>
<p>Le programme <a href="exemples/selectfichier.py" target="_top"><b>selectfichier.py</b></a> donne un exemple d'utilisation du widget de sélection de fichier. Notez que, bien que le bouton Aide apparaisse à l'écran, il n'a aucun effet car aucun signal ne lui est attaché. La <a href="sec-FileSelections.html#FigSelectFichier" title="Figure 9.14. Exemple de Sélecteur de fichier">Figure 9.14</a> montre l'affichage obtenu&nbsp;:</p>

<div class="figure"><a name="FigSelectFichier"></a>
<p class="title"><b>Figure 9.14. Exemple de sélecteur de fichier</b></p>
<div class="mediaobject" align="center">
<img src="figures/selectfichier.png" align="middle" alt="exemple sélecteur de fichier">
</div></div>

<p>Le code source de <a href="exemples/selectfichier.py" target="_top"><b>selectfichier.py</b></a> est le suivant&nbsp;:</p>

<pre class="programlisting">
     1   #!/usr/bin/env python
     2
     3   # exemple selectfichier.py
     4
     5   import pygtk
     6   pygtk.require('2.0')
     7   import gtk
     8
     9   class ExempleSelecteurFichier:
    10       # On recupere le nom du fichier choisi et on l'affiche dans la console
    11       def ok_fichier(self, w):
    12           print "%s" % self.selectfichier.get_filename()
    13
    14       def destroy(self, widget):
    15           gtk.main_quit()
    16
    17       def __init__(self):
    18           # Creation d'un nouveau widget de selection de fichier
    19           self.selectfichier = gtk.FileSelection("Selection de fichier")
    20
    21           self.selectfichier.connect("destroy", self.destroy)
    22           # Connexion du bouton OK a la methode ok_fichier()
    23           self.selectfichier.ok_button.connect("clicked", self.ok_fichier)
    24
    25           # Connexion du bouton Annuler a la destruction du widget
    26           self.selectfichier.cancel_button.connect("clicked",
    27                                            lambda w: self.selectfichier.destroy())
    28
    29           # Definissons le fichier, comme s'il s'agissait d'une boite de dialogue
    30           # d'enregistrement de fichier et que nous donnions un fichier par defaut
    31           self.selectfichier.set_filename("pingouin.png")
    32
    33           self.selectfichier.show()
    34
    35   def main():
    36       gtk.main()
    37       return 0
    38
    39   if __name__ == "__main__":
    40       ExempleSelecteurFichier()
    41       main()
</pre>
</div>

<div class="navfooter">
<hr>

<table width="100%" summary="Bas de page de navigation">
<tr>
<td width="40%" align="left"><a accesskey="p" href="sec-ColorSelection.html">Préc.</a></td>
<td width="20%" align="center"><a accesskey="u" href="ch-MiscellaneousWidgets.html">Chapitre parent</a></td>
<td width="40%" align="right"><a accesskey="n" href="sec-FontSelectionDialog.html">Suiv.</a></td>
</tr><tr>
<td width="40%" align="left" valign="top">9.13. Le sélecteur de couleur</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Table des matières</a></td>
<td width="40%" align="right" valign="top">9.15. Le sélecteur de police</td>
</tr></table></div>

</body>

</html>
