<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
<title>14.3. Les TreeView</title>
<link rel="stylesheet" href="pygtktutfr.css">
<meta name="keywords" content="python,pygtk,tutoriel,traduction,treeview" />
<link rel="start" href="index.html" title="Tutoriel PyGTK 2.0">
<link rel="up" href="ch-TreeViewWidget.html" title="Chapitre 14. Le widget TreeView">
<link rel="prev" href="sec-TreeModelInterface.html" title="14.2. L'interface TreeModel et le stockage des données">
<link rel="next" href="sec-CellRenderers.html" title="14.4. Les CellRenderer">
</head>
<body>
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">14.3. Les TreeView</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="sec-TreeModelInterface.html">Préc.</a> </td>
<th width="60%" align="center">Chapitre 14. Le widget TreeView</th>
<td width="20%" align="right"> <a accesskey="n" href="sec-CellRenderers.html">Suiv.</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1" lang="fr">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="sec-TreeViews"></a>14.3. Les TreeView</h2></div></div></div>
<p>Le <code class="classname">TreeView</code> n'est rien de plus qu'un conteneur pour les objets <code class="classname">TreeViewColumn</code> et <code class="classname">CellRenderer</code>, les deux vrais responsables de l'affichage des données du modèle. Il fournit également une interface pour les lignes de données affichées et pour les caractéristiques contrôlant l'affichage des données.
</p>
<div class="sect2" lang="fr">
<div class="titlepage"><div><div><h3 class="title">
<a name="sec-CreatingTreeView"></a>14.3.1. Créer un TreeView</h3></div></div></div>
<p>On crée un TreeView en faisant appel à son constructeur :
</p>
<pre class="programlisting">
  treeview = gtk.TreeView(<strong class="parameter"><code>model</code></strong>=None)
</pre>
<p>...où <em class="parameter"><code>model</code></em> est un objet implémentant l'interface <code class="classname">TreeModel</code> (en général un <code class="classname">ListStore</code> ou un <code class="classname">TreeStore</code>). Si <em class="parameter"><code>model</code></em> vaut <code class="literal">None</code> ou n'est pas spécifié, le <code class="classname">TreeView</code> ne sera associé à aucun modèle.
</p>
</div>
<div class="sect2" lang="fr">
<div class="titlepage"><div><div><h3 class="title">
<a name="sec-TreeViewModelAccess"></a>14.3.2. Récupérer et spécifier le modèle du TreeView</h3></div></div></div>
<p>Le modèle fournissant les données au <code class="classname">TreeView</code> peut être récupéré avec la méthode <code class="methodname">get_model</code>() :
</p>
<pre class="programlisting">
  modele = treeview.get_model()
</pre>
<p>Un <code class="classname">TreeModel</code> peut être associé simultanément avec plusieurs <code class="classname">TreeView</code> qui actualiseront automatiquement leur affichage lorsque les données du <code class="classname">TreeModel</code> seront modifiées. Si un <code class="classname">TreeView</code> affiche obligatoirement toutes les lignes de son modèle, il peut en revanche n'afficher que certaines des colonnes de ce dernier. Deux <code class="classname">TreeView</code> associés au même <code class="classname">TreeModel</code> peuvent donc donner deux affichages différents des mêmes données.
</p>
<p>Il est également important de savoir qu'il n'y a pas de relation prédéfinie entre les colonnes d'un <code class="classname">TreeView</code> et celles de son <code class="classname">TreeModel</code>. Ainsi, la cinquième colonne de données d'un <code class="classname">TreeModel</code> peut être affichée dans la première colonne d'un <code class="classname">TreeView</code> et dans la troisième d'un autre.
</p>
<p>Un <code class="classname">TreeView</code> peut changer de modèle grâce à la méthode <code class="methodname">set_model</code>() :
</p>
<pre class="programlisting">
  treeview.set_model(<strong class="parameter"><code>model</code></strong>=None)
</pre>
<p>...où <em class="parameter"><code>model</code></em> est un objet implémentant l'interface TreeModel (par exemple un ListStore ou un TreeStore). Si <em class="parameter"><code>model</code></em> vaut <code class="literal">None</code>, le modèle courant est abandonné.
</p>
</div>
<div class="sect2" lang="fr">
<div class="titlepage"><div><div><h3 class="title">
<a name="sec-TreeViewProperties"></a>14.3.3. Les propriétés du TreeView</h3></div></div></div>
<p>Le <code class="classname">TreeView</code> dispose de plusieurs propriétés ainsi que de méthodes pour traiter ces dernières :
</p>
<div class="informaltable"><table cellpadding="5" width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr valign="top">
<td valign="top">"enable-search"</td>
<td valign="top">Lecture-écriture</td>
<td valign="top">Si elle vaut <code class="literal">TRUE</code>, l'utilisateur peut effectuer une recherche interactive dans les colonnes. <code class="literal">TRUE</code> par défaut.</td>
</tr>
<tr valign="top">
<td valign="top">"expander-column"</td>
<td valign="top">Lecture-écriture</td>
<td valign="top">La colonne où doit apparaitre la flèche de développement pour les lignes mères. Colonne 0 par défaut</td>
</tr>
<tr valign="top">
<td valign="top">"fixed-height-mode"</td>
<td valign="top">Lecture-écriture</td>
<td valign="top">Si elle vaut <code class="literal">TRUE</code>, toutes les lignes seront de même hauteur (ce qui accélère l'affichage). Disponible à partir de GTK+ 2.4. <code class="literal">FALSE</code> par défaut.</td>
</tr>
<tr valign="top">
<td valign="top">"hadjustment"</td>
<td valign="top">Lecture-écriture</td>
<td valign="top">L'<code class="classname">Adjustment</code> horizontal pour le widget. Un nouveau est créé par défaut.</td>
</tr>
<tr valign="top">
<td valign="top">"headers-clickable"</td>
<td valign="top">Écriture</td>
<td valign="top">Si elle vaut <code class="literal">TRUE</code>, les en-têtes des colonnes répondront aux clics. <code class="literal">FALSE</code> par défaut.</td>
</tr>
<tr valign="top">
<td valign="top">"headers-visible"</td>
<td valign="top">Lecture-écriture</td>
<td valign="top">Si elle vaut <code class="literal">TRUE</code>, les boutons d'en-tête des colonnes seront visibles. <code class="literal">TRUE</code> par défaut.</td>
</tr>
<tr valign="top">
<td valign="top">"model"</td>
<td valign="top">Lecture-écriture</td>
<td valign="top">Le modèle du TreeView. <code class="literal">None</code> par défaut.</td>
</tr>
<tr valign="top">
<td valign="top">"reorderable"</td>
<td valign="top">Lecture-écriture</td>
<td valign="top">
<code class="literal">TRUE</code> indique la possibilité de réordonner le TreeView. <code class="literal">FALSE</code> par défaut.</td>
</tr>
<tr valign="top">
<td valign="top">"rules-hint"</td>
<td valign="top">Lecture-écriture</td>
<td valign="top">
<code class="literal">TRUE</code> ordonne au moteur de thèmes d'alterner les couleurs des lignes. <code class="literal">FALSE</code> par défaut.</td>
</tr>
<tr valign="top">
<td valign="top">"search-column"</td>
<td valign="top">Lecture-écriture</td>
<td valign="top">La colonne du modèle dans laquelle le code de recherche interactive doit effecuer la recherche. -1 par défaut.</td>
</tr>
<tr valign="top">
<td valign="top">"vadjustment"</td>
<td valign="top">Read-Write</td>
<td valign="top">L'<code class="classname">Adjustment</code> vertical pour le widget. Un nouveau est créé par défaut.</td>
</tr>
</tbody>
</table></div>
<p>Les méthodes correspondantes sont les suivantes :</p>
<pre class="programlisting">
  autorise_rechercher = treeview.get_enable_search()
  treeview.set_enable_search(<strong class="parameter"><code>enable_search</code></strong>)

  colonne = treeview.get_expander_column()
  treeview.set_expander_column(<strong class="parameter"><code>column</code></strong>)

  ajustement_horizontal = treeview.get_hadjustment()
  treeview.set_hadjustment(<strong class="parameter"><code>adjustment</code></strong>)

  treeview.set_headers_clickable(<strong class="parameter"><code>active</code></strong>)

  entetes_visibles = treeview.get_headers_visible()
  treeview.set_headers_visible(<strong class="parameter"><code>headers_visible</code></strong>)

  reordonner = treeview.get_reorderable()
  treeview.set_reorderable(<strong class="parameter"><code>reorderable</code></strong>)

  alterner_couleurs = treeview.get_rules_hint()
  treeview.set_rules_hint(<strong class="parameter"><code>setting</code></strong>)

  colonne = treeview.get_search_column()
  treeview.set_search_column(<strong class="parameter"><code>column</code></strong>)

  ajustement_vertical = treeview.get_vadjustment()
  treeview.set_vadjustment(<strong class="parameter"><code>adjustment</code></strong>)
</pre>
<p>Si la plupart se passent de description, signalons cependant que pour activer la propriété "enable-search" il est nécessaire d'indiquer un numéro de colonne valide à "search-column". Quand l'utilisateur pressera la combinaison de touches <span><strong class="keycap">Control</strong></span>+<span><strong class="keycap">f</strong></span>, une boite de dialogue de recherche apparaitra alors, dans laquelle il pourra saisir le texte à rechercher. La première ligne correspondant sera automatiquement selectionnée pendant la saisie du texte.
</p>
<p>La propriété "headers-clickable" ne fait en réalité qu'activer la propriété "clickable" des <code class="classname">TreeViewColumn</code> sous-jacents. Un <code class="classname">TreeViewColumn</code> ne pourra pas être réordonné si le modèle n'implémente pas l'interface <code class="classname">TreeSortable</code> et si la méthode de <code class="classname">TreeViewColumn</code>
<code class="methodname">set_sort_column_id</code>() n'a pas été appelée avec un numéro de colonne valide.
</p>
<p>La propriété "reorderable" permet à l'utilisateur de réordonner le modèle du <code class="classname">TreeView</code> en glissant-déposant les lignes affichées du <code class="classname">TreeView</code>.
</p>
<p>La propriété "rules-hint" ne devrait être activée que dans les cas où l'on aurait beaucoup de colonnes et où l'on penserait qu'alterner les couleurs pourrait aider l'utilisateur.
</p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="sec-TreeModelInterface.html">Préc.</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch-TreeViewWidget.html">Chapitre parent</a></td>
<td width="40%" align="right"> <a accesskey="n" href="sec-CellRenderers.html">Suiv.</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">14.2. L'interface TreeModel et le stockage des données </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Table des matières</a></td>
<td width="40%" align="right" valign="top"> 14.4. Les CellRenderer</td>
</tr>
</table>
</div>
</body>
</html>
