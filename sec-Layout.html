<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
<title>10.4. Le conteneur Layout (Affiche)</title>
<link rel="stylesheet" href="pygtktutfr.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="Tutoriel PyGTK 2.0">
<link rel="up" href="ch-ContainerWidgets.html" title="Chapitre 10. Les widgets conteneurs">
<link rel="prev" href="sec-Fixed.html" title="10.3. Le conteneur Place (Fixed)">
<link rel="next" href="sec-Frames.html" title="10.5. Les cadres (Frame)">
<meta name="keywords" content="python,pygtk,tutoriel,traduction">
<link rel="home" href="index.html" title="Table des matières">
</head>
<body>
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">10.4. Le conteneur Layout (Affiche)</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="sec-Fixed.html">Préc.</a> </td>
<th width="60%" align="center">Chapitre 10. Les widgets conteneurs</th>
<td width="20%" align="right"> <a accesskey="n" href="sec-Frames.html">Suiv.</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1" lang="fr">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="sec-Layout"></a>10.4. Le conteneur Layout (Affiche)</h2></div></div></div>
<p>Le conteneur <code class="classname">Layout</code> ressemble au conteneur
<code class="classname">Fixed</code> à ceci près qu'il implémente
une zone défilable infinie (un infini limité à 2^32). Le système X window
possède une limitation de taille de fenêtre de 32767x32767 pixels. Le
conteneur <code class="classname">Layout</code>  tourne cette limitation en
réalisant des trucs exotiques utilisant la gravité de fenêtre et de bit.
Il devient ainsi possible d'obtenir un défilement régulier même lorsque
l'on a plein de widgets enfants dans la zone de défilement.
</p>
<p>On crée un conteneur<code class="classname">Layout</code>  par :</p>
<pre class="programlisting">
  affiche = gtk.Layout(<strong class="parameter"><code>hadjustment</code></strong>=None, <strong class="parameter"><code>vadjustment</code></strong>=None)
</pre>
<p>Comme on peut le constater, il est possible d'indiquer,
de manière facultative, des objets <code class="classname">Adjustment</code>,
(voir <a href="ch-Adjustments.html" title="Chapitre 7. Adjustments">Chapitre 7, <i>Adjustments</i></a>) que le widget
<code class="classname">Layout</code> va utiliser pour son défilement. Si
l'on ne précise pas d'objets <code class="classname">Adjustment</code>, des
nouveaux seront créés automatiquement.
</p>
<p>On peut ajouter et déplacer des widgets dans un
conteneur <code class="classname">Layout</code> avec les méthodes
suivantes :</p>
<pre class="programlisting">
  affiche.put(<strong class="parameter"><code>widget_enfant</code></strong>, <strong class="parameter"><code>x</code></strong>, <strong class="parameter"><code>y</code></strong>)

  affiche.move(<strong class="parameter"><code>widget_enfant</code></strong>, <strong class="parameter"><code>x</code></strong>, <strong class="parameter"><code>y</code></strong>)
</pre>
<p>On peut indiquer ou connaître la taille du conteneur
<code class="classname">Layout</code> en utilisant les méthodes :</p>
<pre class="programlisting">
  affiche.set_size(<strong class="parameter"><code>largeur</code></strong>, <strong class="parameter"><code>hauteur</code></strong>)

  taille = layout.get_size()
</pre>
<p>Ces quatres dernières méthodes du widget <code class="classname">Layout</code>
permettent de manipuler les widgets d'ajustement horizontal et vertical :</p>
<pre class="programlisting">
  horiz_ajust = affiche.get_hadjustment()

  vert_ajust = affiche.get_vadjustment()

  affiche.set_hadjustment(<strong class="parameter"><code>ajustement</code></strong>)

  affiche.set_vadjustment(<strong class="parameter"><code>ajustement</code></strong>)
</pre>
<p>Le programme <a href="exemples/layout.py" target="_top"><span><strong class="command">
layout.py</strong></span></a> crée trois boutons et les place dans un
conteneur <code class="classname">Layout</code> affiche. Quand on clique sur
l'un des boutons, il est transféré à un nouvel emplacement, aléatoire,
dans le conteneur. La <a href="sec-Layout.html#layoutfig" title="Figure 10.3. Exemple de conteneur Layout">Figure 10.3, « Exemple de conteneur Layout »</a>montre l'affichage de départ.
</p>
<div class="figure">
<a name="layoutfig"></a><p class="title"><b>Figure 10.3. Exemple de conteneur Layout</b></p>
<div class="mediaobject" align="center"><img src="figures/layout.png" align="middle" alt="Exemple de conteneur Layout"></div>
<span>Exemple de conteneur Layout</span>
</div>
<p>Voici le code source du programme <a href="exemples/layout.py" target="_top">
<span><strong class="command">layout.py</strong></span></a> :</p>
<pre class="programlisting">
     1   #!/usr/bin/env python
     2   # -*- coding:utf-8 -*-
     3   # exemple layout.py
     4
     5   import pygtk
     6   pygtk.require('2.0')
     7   import gtk
     8   import random
     9
    10   class ExempleAffiche:
    11       def WindowDeleteEvent(self, widget, event):
    12           # retourne False pour que la fenêtre soit détruite
    13           return False
    14
    15       def WindowDestroy(self, widget, *data):
    16           # quitte la boucle principale
    17           gtk.main_quit()
    18
    19       def ButtonClicked(self, bouton):
    20           # déplace le bouton
    21           self.affiche.move(bouton, random.randint(0,500),
    22                            random.randint(0,500))
    23
    24       def __init__(self):
    25           # crée la fenêtre de niveau supérieur
    26           fenetre = gtk.Window(gtk.WINDOW_TOPLEVEL)
    27           fenetre.set_title("Exemple conteneur Layout")
    28           fenetre.set_default_size(300, 300)
    29           fenetre.connect("delete-event", self.WindowDeleteEvent)
    30           fenetre.connect("destroy", self.WindowDestroy)
    31           # crée une table et la place dans la fenêtre
    32           table = gtk.Table(2, 2, False)
    33           fenetre.add(table)
    34           # crée le conteneur affiche affiche et le place dans la table
    35           self.affiche = gtk.Layout(None, None)
    36           self.affiche.set_size(600, 600)
    37           table.attach(self.affiche, 0, 1, 0, 1, gtk.FILL|gtk.EXPAND,
    38                        gtk.FILL|gtk.EXPAND, 0, 0)
    39           # crée les barres de défilement et les place dans la table
    40           vert_defil = gtk.VScrollbar(None)
    41           table.attach(vert_defil, 1, 2, 0, 1, gtk.FILL|gtk.SHRINK,
    42                        gtk.FILL|gtk.SHRINK, 0, 0)
    43           horiz_defil = gtk.HScrollbar(None)
    44           table.attach(horiz_defil, 0, 1, 1, 2, gtk.FILL|gtk.SHRINK,
    45                        gtk.FILL|gtk.SHRINK, 0, 0)
    46           # les barres de défilement utilisent les ajustements du conteneur
    47           vAdjust = self.affiche.get_vadjustment()
    48           vert_defil.set_adjustment(vAdjust)
    49           hAdjust = self.affiche.get_hadjustment()
    50           horiz_defil.set_adjustment(hAdjust)
    51           # crée 3 boutons et les place dans le conteneur
    52           bouton = gtk.Button("Clic !")
    53           bouton.connect("clicked", self.ButtonClicked)
    54           self.affiche.put(bouton, 0, 0)
    55           bouton = gtk.Button("Clic !")
    56           bouton.connect("clicked", self.ButtonClicked)
    57           self.affiche.put(bouton, 100, 0)
    58           bouton = gtk.Button("Clic !")
    59           bouton.connect("clicked", self.ButtonClicked)
    60           self.affiche.put(bouton, 200, 0)
    61           # Montre tous les widgets
    62           fenetre.show_all()
    63
    64   def main():
    65       # on entre dans la boucle principale
    66       gtk.main()
    67       return 0
    68
    69   if __name__ == "__main__":
    70       ExempleAffiche()
    71       main()
</pre>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="sec-Fixed.html">Préc.</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch-ContainerWidgets.html">Chapitre parent</a></td>
<td width="40%" align="right"> <a accesskey="n" href="sec-Frames.html">Suiv.</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">10.3. Le conteneur Place (Fixed) </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td>
<td width="40%" align="right" valign="top"> 10.5. Les cadres (Frame)</td>
</tr>
</table>
</div>
</body>
</html>
