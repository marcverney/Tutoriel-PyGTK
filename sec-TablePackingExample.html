<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
<title>4.5. Démonstration de placement avec les tableaux</title>
<link rel="stylesheet" href="pygtktutfr.css">
<meta name="keywords" content="python,pygtk,tutoriel,traduction,boite,tableau">
<link rel="start" href="index.html" title="Tutoriel PyGTK 2.0">
<link rel="home" href="index.html" title="Table des matières">
<link rel="up" href="ch-PackingWidgets.html" title="Chapitre 4. Le placement des widgets">
<link rel="previous" href="sec-PackingUsingTables.html" title="4.4. Le placement avec les tableaux">
<link rel="next" href="ch-WidgetOverview.html" title="Chapitre 5. Vue d'ensemble des widgets">
</head>

<body>
<div class="navheader">

<table width="100%" summary="En-tête de navigation">
<tr>
<th colspan="3" align="center">4.5. Démonstration de placement avec les tableaux</th></tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="sec-PackingUsingTables.html">Préc.</a> </td>
<th width="60%" align="center">Chapitre 4. Le placement des widgets</th>
<td width="20%" align="right"> <a accesskey="n" href="ch-WidgetOverview.html">Suiv.</a></td>
</tr></table>

<hr>
</div>

<div class="sect1"><div class="titlepage"><div>
<h2 class="title" style="clear: both"><a name="Demotableaux"></a>4.5.
Démonstration de placement avec les tableaux</h2></div></div>

<p>Le programme exemple <A href="exemples/tableaux.py" target=_top><B>tableaux.py</B></A>
crée une fenêtre avec trois boutons dans un tableau de 2x2. Les deux premiers
boutons sont placés sur la ligne du haut. Le troisième, le bouton "Quitter",
est placé sur la ligne du bas et occupe les deux colonnes. La
<A title="Figure 4.4. Placement avec un tableau"
href="sec-TablePackingExample.html#tableauxfig">figure 4.4</A> montre la fenêtre
obtenue&nbsp;:</p>

<div class="figure">
<a name="tableauxfig"></a>
<p class="title"><b>Figure 4.4. Placement avec un tableau</b></p>
<div class="mediaobject" align="center">
<img src="figures/tableaux.png" alt="exemple tableau" align="middle">
</div></div>

<p>Voici le code source&nbsp;:</p>

<pre class="programlisting">
     1   #!/usr/bin/env python
     2
     3   # exemple tableau.py
     4
     5   import pygtk
     6   pygtk.require('2.0')
     7   import gtk
     8
     9   class Tableau:
    10       # Notre fonction de rappel. Le parametre "donnees"
    11       # transmis a cette methode est affiche sur stdout
    12       def salut(self, widget, donnees=None):
    13           print "Salut ! - Clic sur le %s." % donnees
    14
    15       # Cette fonction de rappel quitte le programme
    16       def evnmt_delete(self, widget, evenement, donnees=None):
    17           gtk.main_quit()
    18           return False
    19
    20       def __init__(self):
    21           # Creation d'une nouvelle fenetre.
    22           self.fenetre = gtk.Window(gtk.WINDOW_TOPLEVEL)
    23
    24           # On definit le titre de la fenetre.
    25           self.fenetre.set_title("Tableau")
    26
    27           # On definit un gestionnaire de signal pour "delete_event",
    28           # qui quitte GTK immediatement.
    29           self.fenetre.connect("delete_event", self.evnmt_delete)
    30
    31           # On fixe la largeur des bordures de la fenetre.
    32           self.fenetre.set_border_width(20)
    33
    34           # Creation d'un tableau de 2x2.
    35           tableau = gtk.Table(2, 2, True)
    36
    37           # On place le tableau dans la fenetre principale.
    38           self.fenetre.add(tableau)
    39
    40           # Creation du premier bouton.
    41           bouton = gtk.Button("bouton 1")
    42
    43           # Lorsque l'on clique sur le bouton, la methode salut() est
    44           # appelee, avec un pointeur sur "bouton 1" comme argument.
    45           bouton.connect("clicked", self.salut, "bouton 1")
    46
    47
    48           # Insertion du bouton 1 dans le quart superieur gauche du tableau.
    49           tableau.attach(bouton, 0, 1, 0, 1)
    50
    51           bouton.show()
    52
    53           # Creation du second bouton.
    54
    55           bouton = gtk.Button("bouton 2")
    56
    57           # Lorsque l'on clique sur le bouton, la methode "salut" est
    58           # appelee, avec un pointeur sur "bouton 2" comme argument.
    59           bouton.connect("clicked", self.salut, "bouton 2")
    60           # Insertion du bouton 2 dans le quart superieur droit du tableau.
    61           tableau.attach(bouton, 1, 2, 0, 1)
    62
    63           bouton.show()
    64
    65           # Creation du bouton "Quitter".
    66           bouton = gtk.Button("Quitter")
    67
    68           # Lorsque l'on clique sur le bouton, la fonction mainquit est
    69           # appelee et le programme se termine.
    70           bouton.connect("clicked", gtk.main_quit)
    71
    72           # Insertion du bouton "Quitter" dans les deux quarts inferieurs du tableau.
    73           tableau.attach(bouton, 0, 2, 1, 2)
    74
    75           bouton.show()
    76
    77           tableau.show()
    78           self.fenetre.show()
    79
    80   def main():
    81       gtk.main()
    82       return 0
    83
    84   if __name__ =="__main__":
    85       Tableau()
    86       main()
</pre>

<p>La classe <tt>Tableau</tt> est définie de la ligne 9 à la ligne 78.</p>
<p>Aux lignes 12-13, on définit la fonction de rappel <tt>salut</tt>(), appelée
par un clic sur le bouton 1 ou sur le bouton 2. Elle affiche juste un message dans la console
qui indique quel bouton a été cliqué, et se sert pour cela de la chaine
de caractères qui lui est transmise.</p>
<p>Aux lignes 16-18, on définit la méthode <tt>evnmt_delete</tt>(), qui est
invoquée lorsque le gestionnaire de fenêtres tente de fermer la fenêtre
principale.</p>
<p>De la ligne 20 à la ligne 78, on définit <tt>__init__</tt>(), la
méthode constructeur de la classe <tt>Tableau</tt>. Elle crée une fenêtre
(ligne 22), lui donne un titre (ligne 25), connecte la fonction de rappel
<tt>evnmt_delete</tt>() au signal "<tt>delete_event</tt>" (ligne 29), et fixe les
bordures de la fenêtre (ligne 32). Un <tt>gtk.Table</tt> est créé
à la ligne 35 et est ajouté à la fenêtre principale à
la ligne 38.</p>
<p>Puis les deux boutons du haut sont créés (lignes 41 et 55), on connecte
leurs signaux "<tt>clicked</tt>" à la méhode <tt>salut</tt>()
(lignes 45 et 59) et on les place dans la première ligne du tableau (lignes 49 et 61).
Pour finir, on crée le bouton "Quitter" aux lignes 66 à 73, on connecte son
signal "<tt>clicked</tt>" à la fonction <tt>mainquit</tt>(), et on le
place sur toute l'étendue de la seconde ligne du tableau.</p>
</div>

<div class="navfooter">
<hr>

<table width="100%" summary="Bas de page de navigation">
<tr>
<td width="40%" align="left"><a accesskey="p" href="sec-PackingUsingTables.html">Préc.</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch-PackingWidgets.html">Chapitre parent</a></td>
<td width="40%" align="right"> <a accesskey="n" href="ch-WidgetOverview.html">Suiv.</a></td></tr>
<tr>
<td width="40%" align="left" valign="top">4.4. Le placement avec les tableaux</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Table des matières</a></td>
<td width="40%" align="right" valign="top">Chapitre 5. Vue d'ensemble des widgets</td>
</tr></table>

</div>

</body>

</html>
